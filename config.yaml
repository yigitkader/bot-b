# Trading Bot Configuration - Clean Architecture

symbols: []
auto_discover_quote: true
quote_asset: "USDC"
allow_usdt_quote: true
mode: "futures"

max_usd_per_order: 100.0
min_usd_per_order: 10.0
min_margin_usd: 10.0
max_margin_usd: 100.0
margin_strategy: "balance_based"
min_quote_balance_usd: 20.0

leverage: 125

price_tick: 0.001
qty_step: 0.001

take_profit_pct: 0.35
stop_loss_pct: 0.12

trending:
  ema_fast_period: 21
  ema_slow_period: 55
  rsi_period: 14
  atr_period: 14
  warmup_min_ticks: 70
  min_spread_bps: 0.01
  max_spread_bps: 200.0
  signal_cooldown_seconds: 12
  hft_mode: true
  require_volume_confirmation: false
  base_min_score: 6.5
  trend_threshold_hft: 0.5
  trend_threshold_normal: 0.6
  weak_trend_score_multiplier: 1.15
  regime_multiplier_trending: 0.9
  regime_multiplier_ranging: 1.15
  rsi_lower_long: 40.0
  rsi_upper_long: 65.0
  atr_sl_multiplier: 2.0
  atr_tp_multiplier: 4.0

binance:
  futures_base: "https://fapi.binance.com"
  api_key: ""
  secret_key: ""
  recv_window_ms: 5000
  hedge_mode: false

risk:
  max_leverage: 200
  use_isolated_margin: true
  max_position_notional_usd: 30000.0
  maker_commission_pct: 0.02
  taker_commission_pct: 0.04
  # Liquidation cluster aggregation window (seconds)
  # Lower values (10-20s) for high volatility markets
  # Higher values (30-60s) for stable markets
  # Default: 30 seconds
  liq_window_secs: 30

websocket:
  enabled: true
  reconnect_delay_ms: 5000
  ping_interval_ms: 30000

exec:
  tif: "post_only"
  default_leverage: 20

  min_profit_usd: 0.50
  max_position_duration_sec: 60.0
  max_loss_duration_sec: 30.0

  time_weighted_threshold_early: 0.3
  time_weighted_threshold_normal: 0.5
  time_weighted_threshold_mid: 0.3
  time_weighted_threshold_late: 0.2

  trailing_stop_threshold_ratio: 0.5
  max_loss_threshold_ratio: 2.0
  stop_loss_threshold_ratio: 0.8

event_bus:
  # Buffer sizes optimized for memory efficiency
  # Market tick: 1 msg/sec, 2000 buffer = ~33 min data, ~400 KB memory
  market_tick_buffer: 2000
  # Trade signals: Low frequency, 500 buffer sufficient
  trade_signal_buffer: 500
  # Close requests: Low frequency, 500 buffer sufficient
  close_request_buffer: 500
  # Order updates: Medium frequency, 1000 buffer sufficient
  order_update_buffer: 1000
  # Position updates: Low frequency, 500 buffer sufficient
  position_update_buffer: 500
  # Balance updates: Very low frequency (30s interval), 100 buffer sufficient
  balance_update_buffer: 100

dynamic_symbol_selection:
  enabled: true
  max_symbols: 30
  rotation_interval_minutes: 15

  min_volatility_pct: 1.5
  min_quote_volume: 1000000
  min_trades_24h: 1000

  volatility_weight: 2.0
  volume_weight: 1.0
  trades_weight: 0.5
  spread_weight: 1.0
