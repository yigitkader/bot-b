#root config.yaml

symbols: []            # Manuel semboller; boş bırakırsan auto discovery devrede
auto_discover_quote: true
quote_asset: "USDC"
mode: "futures"       # "spot" | "futures"
metrics_port: 9000

# Emir boyutu sınırı (notional = price * qty); hem spot hem futures için uygulanır.
max_usd_per_order: 100.0
min_usd_per_order: 20.0  # Gerçekçi: 15.0 → 20.0 (daha fazla kazanç/işlem, 20 USD * 3 bps = 0.006 USD minimum)

# Quote asset minimum bakiye eşiği (USD)
# Her sembol kendi quote asset'ini kullanır (BTCUSDT → USDT, BTCUSDC → USDC)
# Eğer o quote asset'te bakiye bu eşikten azsa, o sembol skip edilir
# Diğer quote asset'li semboller devam edebilir
min_quote_balance_usd: 1.0

# Kaldıraç (sadece futures)
# KRİTİK DÜZELTME: 5 → 3 (daha güvenli)
leverage: 3

# Fiyat/lot adımı (quantize için). İstersen exchangeInfo'dan otomatik de çekebiliriz,
# ama basit ve deterministik olsun diye konfigde tutuyoruz.
price_tick: 0.001
qty_step: 0.001

# Binance API
binance:
  # SPOT
  spot_base: "https://api.binance.com"
  # USDⓈ-M Futures (USDC teminat)
  futures_base: "https://fapi.binance.com"
  api_key: ""
  secret_key: ""
  recv_window_ms: 5000

risk:
  inv_cap: "0.50"
  min_liq_gap_bps: 300
  dd_limit_bps: 2000
  max_leverage: 20

strategy:
  type: "dyn_mm"
  a: 100.0   # Gerçekçi: 80.0 → 100.0 (spread'i biraz genişlet, kazanç için)
  b: 35.0    # Gerçekçi: 30.0 → 35.0 (spread'i biraz genişlet)
  base_size: "20.0"  # Gerçekçi: 30.0 → 40.0 (daha fazla kazanç/işlem, 40 USD * 3 bps = 0.012 USD/işlem)
  
  # --- Spread ve Fiyatlama Eşikleri ---
  min_spread_bps: 3.0              # Minimum spread (bps)
  max_spread_bps: 100.0            # Maksimum spread (bps)
  spread_arbitrage_min_bps: 50.0   # Spread arbitraj minimum eşiği (bps) (30 → 50: daha gerçekçi)
  spread_arbitrage_max_bps: 150.0  # Spread arbitraj maksimum eşiği (bps) (200 → 150: çok geniş spread riskli)
  
  # --- Trend Takibi Eşikleri ---
  strong_trend_bps: 100.0          # Güçlü trend eşiği (bps)
  momentum_strong_bps: 50.0         # Momentum güçlü eşiği (bps)
  trend_bias_multiplier: 1.0       # Trend bias çarpanı
  
  # --- Adverse Selection Eşikleri ---
  adverse_selection_threshold_on: 0.6   # Adverse selection açılma eşiği
  adverse_selection_threshold_off: 0.4 # Adverse selection kapanma eşiği
  
  # --- Fırsat Modu Eşikleri ---
  opportunity_threshold_on: 0.5    # Fırsat modu açılma eşiği
  opportunity_threshold_off: 0.2   # Fırsat modu kapanma eşiği
  
  # --- Manipülasyon Tespit Eşikleri ---
  price_jump_threshold_bps: 250.0  # Flash crash/pump eşiği (bps) (150 → 250: daha sıkı, false positive azalt)
  fake_breakout_threshold_bps: 100.0 # Fake breakout eşiği (bps)
  liquidity_drop_threshold: 0.5    # Likidite düşüş eşiği (ratio)
  
  # --- Envanter Yönetimi ---
  inventory_threshold_ratio: 0.15  # Envanter threshold oranı (%) (0.05 → 0.15: daha toleranslı, market making için)
  
  # --- Adaptif Spread Katsayıları ---
  volatility_coefficient: 0.5     # Volatilite katsayısı (c1)
  ofi_coefficient: 0.5            # OFI katsayısı (c2)
  
  # --- Diğer ---
  min_liquidity_required: 0.01     # Minimum likidite gereksinimi
  opportunity_size_multiplier: 1.2 # Fırsat modu pozisyon çarpanı (1.5 → 1.2: daha güvenli, false positive riski azalt)
  strong_trend_multiplier: 1.2     # Güçlü trend pozisyon çarpanı (1.5 → 1.2: daha güvenli)

exec:
  tif: "post_only"     # "gtc" | "ioc" | "post_only"
  venue: "binance"     # sabit
  cancel_replace_interval_ms: 500  # Optimize: 1000 → 500 (2x daha sık güncelleme, daha fazla işlem)
  max_order_age_ms: 5000  # Optimize: 10000 → 5000 (daha hızlı yenileme)

websocket:
  enabled: true
  reconnect_delay_ms: 5000
  ping_interval_ms: 30000
